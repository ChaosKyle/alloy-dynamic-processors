# =============================================================================
# Alloy Dynamic Processors - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# IMPORTANT: Never commit .env with real credentials to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Grafana Cloud Configuration
# -----------------------------------------------------------------------------
# Your Grafana Cloud instance ID (found in your Grafana Cloud portal)
GRAFANA_CLOUD_INSTANCE_ID=123456

# Grafana Cloud API Key (create at: https://grafana.com/orgs/<your-org>/api-keys)
# Format: glc_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
GRAFANA_CLOUD_API_KEY=glc_your_api_key_here

# Grafana Cloud Prometheus Remote Write URL
# Format: https://prometheus-prod-XX-REGION.grafana.net/api/prom/push
GRAFANA_CLOUD_PROMETHEUS_URL=https://prometheus-prod-01-eu-west-0.grafana.net/api/prom/push

# Grafana Cloud Prometheus Username (usually your instance ID)
GRAFANA_CLOUD_PROMETHEUS_USERNAME=123456

# Grafana Cloud Tempo Endpoint
# Format: https://tempo-prod-XX-REGION.grafana.net:443
GRAFANA_CLOUD_TEMPO_URL=https://tempo-prod-04-eu-west-0.grafana.net:443

# Grafana Cloud Tempo Username (usually your instance ID)
GRAFANA_CLOUD_TEMPO_USERNAME=123456

# Grafana Cloud Loki Endpoint
# Format: https://logs-prod-XXX.grafana.net/loki/api/v1/push
GRAFANA_CLOUD_LOKI_URL=https://logs-prod-006.grafana.net/loki/api/v1/push

# Grafana Cloud Loki Username (usually your instance ID)
GRAFANA_CLOUD_LOKI_USERNAME=123456

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
# Application name for resource labeling
APP_NAME=alloy-dynamic-processors

# Application version
APP_VERSION=1.0.0

# Deployment environment (development, staging, production)
ENVIRONMENT=development

# Service namespace for telemetry organization
SERVICE_NAMESPACE=alloy-monitoring

# Cluster name identifier
CLUSTER_NAME=local-alloy-cluster

# Deployment region
REGION=us-west-2

# -----------------------------------------------------------------------------
# AI Sorter Configuration (Optional - Feature Flag)
# -----------------------------------------------------------------------------
# Enable/disable AI-powered log sorting sidecar
# Set to "true" to enable, "false" to disable (default: false)
AI_SORTER_ENABLED=false

# xAI Grok API Key (required if AI_SORTER_ENABLED=true)
# Get your key at: https://x.ai/api
GROK_API_KEY=your-grok-api-key-here

# AI Sorter API endpoint (internal service URL)
AI_SORTER_URL=http://ai-sorter:8080

# AI Sorter timeout in seconds
AI_SORTER_TIMEOUT=30

# AI Sorter retry attempts
AI_SORTER_RETRY_ATTEMPTS=3

# AI Sorter batch size for classification
AI_SORTER_BATCH_SIZE=10

# AI Sorter rate limit (requests per minute)
AI_SORTER_RATE_LIMIT=60

# AI Model selection (grok-1, grok-2, etc.)
AI_MODEL=grok-2

# -----------------------------------------------------------------------------
# Alloy Configuration
# -----------------------------------------------------------------------------
# Alloy HTTP listen address
ALLOY_HTTP_LISTEN_ADDR=0.0.0.0:12345

# Alloy gRPC listen address
ALLOY_GRPC_LISTEN_ADDR=0.0.0.0:12346

# Alloy health check endpoint
ALLOY_HEALTH_ADDR=0.0.0.0:13133

# Alloy metrics endpoint
ALLOY_METRICS_ADDR=0.0.0.0:8889

# Alloy log level (debug, info, warn, error)
ALLOY_LOG_LEVEL=info

# Alloy log format (json, logfmt)
ALLOY_LOG_FORMAT=json

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
# Local Prometheus endpoint (for testing)
PROMETHEUS_URL=http://prometheus:9090

# Local Loki endpoint (for testing)
LOKI_URL=http://loki:3100

# Local Tempo endpoint (for testing)
TEMPO_URL=http://tempo:4317

# Grafana dashboard URL
GRAFANA_URL=http://grafana:3000

# Grafana admin credentials (local only - change these!)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# -----------------------------------------------------------------------------
# Data Retention & Limits
# -----------------------------------------------------------------------------
# Metrics retention period (days)
METRICS_RETENTION_DAYS=15

# Logs retention period (days)
LOGS_RETENTION_DAYS=7

# Traces retention period (days)
TRACES_RETENTION_DAYS=7

# Maximum batch size for telemetry processing
MAX_BATCH_SIZE=1000

# Batch timeout in seconds
BATCH_TIMEOUT=10

# -----------------------------------------------------------------------------
# Resource Detection Configuration
# -----------------------------------------------------------------------------
# Enable automatic resource detection
RESOURCE_DETECTION_ENABLED=true

# Resource detection providers (comma-separated)
# Options: env, system, docker, kubernetes, aws, gcp, azure
RESOURCE_DETECTION_PROVIDERS=env,system,docker

# Resource attributes to include (comma-separated)
RESOURCE_ATTRIBUTES=service.name,service.version,deployment.environment

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Enable TLS for exporters
TLS_ENABLED=true

# Skip TLS certificate verification (NOT for production!)
TLS_INSECURE_SKIP_VERIFY=false

# Path to TLS certificate file
TLS_CERT_FILE=/etc/ssl/certs/cert.pem

# Path to TLS key file
TLS_KEY_FILE=/etc/ssl/private/key.pem

# Path to CA certificate file
TLS_CA_FILE=/etc/ssl/certs/ca.pem

# -----------------------------------------------------------------------------
# Performance Tuning
# -----------------------------------------------------------------------------
# Number of worker goroutines
WORKER_COUNT=4

# Queue size for buffering
QUEUE_SIZE=5000

# Memory limiter limit in MiB
MEMORY_LIMIT_MIB=512

# Memory limiter spike limit in MiB
MEMORY_SPIKE_LIMIT_MIB=128

# Memory check interval
MEMORY_CHECK_INTERVAL=5s

# -----------------------------------------------------------------------------
# Kubernetes-Specific Configuration (for Helm deployments)
# -----------------------------------------------------------------------------
# Kubernetes namespace
K8S_NAMESPACE=monitoring

# Kubernetes cluster name
K8S_CLUSTER_NAME=production-cluster

# Enable Kubernetes attributes processor
K8S_ATTRIBUTES_ENABLED=true

# Kubernetes node name (auto-detected if not set)
K8S_NODE_NAME=${NODE_NAME}

# Kubernetes pod name (auto-detected if not set)
K8S_POD_NAME=${POD_NAME}

# Kubernetes namespace (auto-detected if not set)
K8S_POD_NAMESPACE=${POD_NAMESPACE}

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# Enable/disable specific features
FEATURE_RESOURCE_DETECTION=true
FEATURE_BATCH_PROCESSING=true
FEATURE_MEMORY_LIMITER=true
FEATURE_SAMPLING=false
FEATURE_METRICS_GENERATION=true

# Sampling rate (0.0 to 1.0, where 1.0 = 100%)
SAMPLING_RATE=1.0

# -----------------------------------------------------------------------------
# Debug & Development
# -----------------------------------------------------------------------------
# Enable debug mode (verbose logging, additional metrics)
DEBUG_MODE=false

# Enable profiling endpoint
ENABLE_PROFILING=false

# Profiling endpoint address
PROFILING_ADDR=localhost:6060

# Enable trace exporter debug logging
TRACE_DEBUG=false

# -----------------------------------------------------------------------------
# OTLP Receiver Configuration
# -----------------------------------------------------------------------------
# OTLP gRPC receiver endpoint
OTLP_GRPC_ENDPOINT=0.0.0.0:4317

# OTLP HTTP receiver endpoint
OTLP_HTTP_ENDPOINT=0.0.0.0:4318

# OTLP receiver timeout
OTLP_RECEIVER_TIMEOUT=30s

# -----------------------------------------------------------------------------
# Backup & Disaster Recovery
# -----------------------------------------------------------------------------
# Enable data persistence
ENABLE_PERSISTENCE=false

# Persistent volume path
PERSISTENCE_PATH=/var/lib/alloy

# Backup retention period (days)
BACKUP_RETENTION_DAYS=30
